<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Bradyâ€™s Good Boy Game ğŸ¶</title>
<style>
body { font-family: 'Comic Sans MS', cursive; text-align:center; background:#fff5e1; color:#333; overflow-x:hidden; }
h1{font-size:3em; margin-top:30px; color:#4b2e83;}
#loginScreen{margin-top:50px;}
#loginScreen input, #loginScreen button{font-size:1.2em; padding:8px; margin:5px; border-radius:6px; border:1px solid #aaa;}
#loginScreen button{background-color:#8bc34a; cursor:pointer;}
#game{display:none;}
#treatButton{margin-top:20px; padding:20px 40px; font-size:2em; background:#ffcc00; border:none; border-radius:12px; cursor:pointer;}
#stats{margin:20px; font-size:1.5em;}
.section{margin-top:30px;}
.upgrade,.autofarm{margin:10px auto; padding:10px 20px; font-size:1.1em; background:#8bc34a; border:none; border-radius:8px; cursor:pointer; display:block; width:350px;}
.floating{position:absolute; animation:floatUp 1s ease-out forwards; font-weight:bold; color:#ff6600;}
@keyframes floatUp{0%{opacity:1; transform:translateY(0px);}100%{opacity:0; transform:translateY(-50px);}}
</style>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/supabase.min.js"></script>
</head>
<body>

<div id="loginScreen">
<h1>Bradyâ€™s World ğŸ¶</h1>
<input type="email" id="email" placeholder="Email"><br>
<input type="password" id="password" placeholder="Password"><br>
<button id="signupBtn">Sign Up</button>
<button id="loginBtn">Login</button>
</div>

<div id="game">
<h1>Bradyâ€™s Good Boy Game ğŸ¶</h1>
<p id="stats">
ğŸ¦´ Treats: <span id="treats">0</span><br>
â­ Good Boys: <span id="goodBoys">0</span><br>
ğŸ¶ Treats per click: <span id="tpc">1</span><br>
âš™ï¸ Auto Treats/sec: <span id="tps">0</span><br>
â±ï¸ Time Played: <span id="timePlayed">0</span> sec
</p>
<button id="treatButton">Give Brady a Treat ğŸ–</button>

<div class="section">
<h2>Upgrades (Treats)</h2>
<button class="upgrade" id="bellyRubs">Belly Rubs (+1/click) â€“ 10 Treats (Owned: <span id="bellyCount">0</span>)</button>
<button class="upgrade" id="walkies">Walkies (+5/click) â€“ 50 Treats (Owned: <span id="walkiesCount">0</span>)</button>
<button class="upgrade" id="goldenBone">Golden Bone (+100/click) â€“ 500 Treats (Owned: <span id="goldenCount">0</span>)</button>
</div>

<div class="section">
<h2>Auto Farm (Good Boys)</h2>
<button class="autofarm" id="squirrel">Squirrel Scout (+1/sec) â€“ 5 Good Boys (Owned: <span id="squirrelCount">0</span>)</button>
<button class="autofarm" id="grandma">Grandma (+5/sec) â€“ 20 Good Boys (Owned: <span id="grandmaCount">0</span>)</button>
<button class="autofarm" id="army">Golden Retriever Army (+20/sec) â€“ 100 Good Boys (Owned: <span id="armyCount">0</span>)</button>
</div>
</div>

<script>
const SUPABASE_URL = 'https://qhxcadpgcebjllrccrxa.supabase.co';
const SUPABASE_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFoeGNhZHBnY2ViamxscmNjcnhhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjA0NTA3MzEsImV4cCI6MjA3NjAyNjczMX0.L5V3jDumTb6cCrXvVI5d0AI06j2ZORsaW9gbrWsg49c';
const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_KEY);

let treats=0, treatsPerClick=1, treatsPerSecond=0, goodBoys=0, timePlayed=0;
let upgradeCounts={ bellyRubs:0, walkies:0, goldenBone:0 };
let farmCounts={ squirrel:0, grandma:0, army:0 };
let upgrades = {
  bellyRubs:{cost:10, bonus:1, counterId:'bellyCount'},
  walkies:{cost:50, bonus:5, counterId:'walkiesCount'},
  goldenBone:{cost:500, bonus:100, counterId:'goldenCount'}
};
let autoFarms = {
  squirrel:{cost:5, rate:1, counterId:'squirrelCount'},
  grandma:{cost:20, rate:5, counterId:'grandmaCount'},
  army:{cost:100, rate:20, counterId:'armyCount'}
};

// DOM
const loginScreen = document.getElementById('loginScreen');
const gameDiv = document.getElementById('game');
const emailInput = document.getElementById('email');
const passwordInput = document.getElementById('password');
const loginBtn = document.getElementById('loginBtn');
const signupBtn = document.getElementById('signupBtn');
const treatButton = document.getElementById('treatButton');
const treatDisplay = document.getElementById('treats');
const goodBoyDisplay = document.getElementById('goodBoys');
const tpcDisplay = document.getElementById('tpc');
const tpsDisplay = document.getElementById('tps');
const timeDisplay = document.getElementById('timePlayed');

// Auth
signupBtn.addEventListener('click', async ()=>{
  const {data,error}=await supabase.auth.signUp({email:emailInput.value,password:passwordInput.value});
  if(error) alert(error.message); else alert('Signed up! Login now.');
});
loginBtn.addEventListener('click', async ()=>{
  const {data,error}=await supabase.auth.signInWithPassword({email:emailInput.value,password:passwordInput.value});
  if(error) alert(error.message); else { loginScreen.style.display='none'; gameDiv.style.display='block'; loadGameData(); startTimers(); }
});

// Load & Save
async function loadGameData(){
  const user = supabase.auth.user();
  if(!user) return;
  const { data } = await supabase.from('players').select('game_data').eq('id',user.id).single();
  if(data?.game_data){
    const g=data.game_data;
    treats=g.treats; treatsPerClick=g.treatsPerClick; treatsPerSecond=g.treatsPerSecond;
    upgradeCounts=g.upgradeCounts; farmCounts=g.farmCounts; timePlayed=g.timePlayed;
    updateStats();
  }
}
async function saveGame(){
  const user = supabase.auth.user();
  if(!user) return;
  await supabase.from('players').upsert({id:user.id,game_data:{treats,treatsPerClick,treatsPerSecond,upgradeCounts,farmCounts,timePlayed}});
}

// Treat Button
treatButton.addEventListener('click',e=>{
  treats+=treatsPerClick;
  goodBoys=Math.floor(treats/10);
  createFloating('+ğŸ–',e);
  updateStats();
  saveGame();
});

// Upgrades & Autofarms
for(const key in upgrades){
  document.getElementById(key).addEventListener('click',()=>{
    const up=upgrades[key];
    if(treats>=up.cost){
      treats-=up.cost;
      treatsPerClick+=up.bonus;
      upgradeCounts[key]++;
      up.cost=Math.floor(up.cost*1.2);
      document.getElementById(up.counterId).textContent=upgradeCounts[key];
      document.getElementById(key).textContent=`${key.replace(/([A-Z])/g,' $1').trim()} (+${up.bonus}/click) â€“ ${up.cost} Treats (Owned: ${upgradeCounts[key]})`;
      updateStats(); saveGame();
    }
  });
}
for(const key in autoFarms){
  document.getElementById(key).addEventListener('click',()=>{
    const farm=autoFarms[key];
    if(goodBoys>=farm.cost){
      goodBoys-=farm.cost;
      treatsPerSecond+=farm.rate;
      farmCounts[key]++;
      farm.cost=Math.floor(farm.cost*1.2);
      document.getElementById(farm.counterId).textContent=farmCounts[key];
      document.getElementById(key).textContent=`${key.replace(/([A-Z])/g,' $1').trim()} (+${farm.rate}/sec) â€“ ${farm.cost} Good Boys (Owned: ${farmCounts[key]})`;
      updateStats(); saveGame();
    }
  });
}

// Timers
function startTimers(){
  setInterval(()=>{
    treats+=treatsPerSecond;
    goodBoys=Math.floor(treats/10);
    timePlayed++;
    updateStats(); saveGame();
  },1000);
}

// Stats & Floating
function updateStats(){
  treatDisplay.textContent=Math.floor(treats);
  goodBoyDisplay.textContent=goodBoys;
  tpcDisplay.textContent=treatsPerClick;
  tpsDisplay.textContent=treatsPerSecond;
  timeDisplay.textContent=timePlayed;
}
function createFloating(text,e){
  const span=document.createElement('span');
  span.className='floating'; span.textContent=text;
  document.body.appendChild(span);
  span.style.left=e.pageX+'px';
  span.style.top=e.pageY+'px';
  setTimeout(()=>span.remove(),1000);
}
</script>
</body>
</html>
